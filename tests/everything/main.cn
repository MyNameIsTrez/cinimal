import { bark, get_paw_count } from animals/dog.cn

struct Names
	str first_name
	str last_name

enum Country
	ukraine
	mexico

struct Person
	f64 age
	Names names
	Country country

ptr thing allocate_one_person()
	return allocate(1, Person)

void add(ptr i32 n)
	n*++

i32 main()
	i32 i
	i = 0

	while i < 3
		if i == 0
			print("foo")
		else
			print("bar")
		i++

	assert(i == 3)
	add(&i)
	assert(i == 4)

	Dog::bark()
	assert(Dog::get_paw_count() == 4)

	assert(Country::mexico == 1)

	ptr Person people
	people = allocate(2, Person)

	ptr Person frank
	frank = &people[0]
	frank*.age = 24 * 1.5
	assert(people[0].age == 36)
	frank*.names.last_name = "frank"
	assert(people[0].names.last_name == "frank")

	assert(people[1].names.last_name == NULL);

	people[1].country = Country::mexico
	assert(people[1].country != Country::ukraine)

	free(people)
	assert(people == nullptr)

	people = allocate_one_person()
	people[0].age = 42
	assert(people[0].age == 42)

	free(people)

	arr[2] Person friends
	friends = 0
	friends[1].age = 13
	assert(friends[1].age == 13)

	return 0
