import { bark, get_paw_count } from animals/dog.cn

struct Names
	str first_name
	str last_name

enum Country
	ukraine
	mexico

struct Person
	f64 age
	Names names
	Country country

void twice(ref i32 n)
	n *= 2

i32 main()
	i32 i
	i = 0
	while i < 3
		if i == 0
			print("deez")
		elif i == 1
			assert(dog::get_paw_count(i) == 4)
		else
			assert(Country::mexico == 1)

		i += 1

	twice(i)
	assert(i == 6)

	Dog::bark()

	Person[] people
	people = array(2)

	ref Person frank
	frank = people[0]

	frank.age = 24 * 1.5
	assert(people[0].age == 36)
	frank.names.last_name = "frank"

	assert(people[1].names.last_name == "")
	people[1].country = Country::ukraine
	assert(people[1].country != Country::mexico)

	# This grows the array and frees the old one
	people = array(3)
	people[0].age = 0
	people[1].age = 1
	people[2].age = 2
	assert(people[2].age == 2)

	free(people)
	assert(people == freed)

	return 0
