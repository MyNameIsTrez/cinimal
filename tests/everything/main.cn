import { bark, get_paw_count } from animals/dog.cn

struct Names
	str first_name
	str last_name

enum Country
	ukraine
	mexico

struct Person
	f64 age
	Names names
	Country country

void doubling(ref i32 n)
	n *= 2

i32 main()
	i32 i
	i = 0
	while i < 3
		if i == 0
			print("foo")
		else
			print("bar")

		i += 1

	doubling(i)
	assert(i == 6)

	Dog::bark()
	assert(dog::get_paw_count() == 4)

	assert(Country::mexico == 1)

	Person[] people

	Person frank
	frank.age = 24 * 1.5
	assert(frank.age == 36)
	frank.names.last_name = "frank"
	people.push(frank)

	Person john
	assert(john.names.last_name == "")
	john.country = Country::mexico
	assert(john.country != Country::ukraine)
	people.push(john)

	assert(people.size() == 2)
	Person last
	last = people.pop()
	assert(last.country == Country::mexico)
	assert(people.size() == 1)

	free(people)
	assert(people == freed)

	# people.push() after freeing is not allowed

	return 0
